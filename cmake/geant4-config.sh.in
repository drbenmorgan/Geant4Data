#!/bin/sh

#-----------------------------------------------------------------------
# Bourne shell query script for Geant4 Data Libraries
# This file is generated by CMake - DO NOT EDIT!
#
#          Copyright Ben Morgan <bmorgan.warwick@gmail.com> 2012  
# Distributed under the Boost Software License, Version 1.0.
#    (See accompanying file LICENSE_1_0.txt or copy at
#          http://www.boost.org/LICENSE_1_0.txt)

# - The use cases for querying data are
# : which datasets are installed?
# : is dataset X installed?
# : what is the path to dataset X?
#
# Which implies variables
# 1 - list of dataset names
# 2 - <name>_VERSION
# 3 - <name>_PATH

datasets="@GEANT4_DATASET_LIST@"
datasetpaths="@GEANT4_DATASET_PATHS@"
datasetenvironment="@GEANT4_DATASET_ENVIRONMENT@"

#-----------------------------------------------------------------------
# usage function
#
usage()
{
  cat<<EOF
Usage: geant4-config [--datasets]
EOF
  exit 1
}



#-----------------------------------------------------------------------
# Process arguments
#
if test $# -eq 0 ; then
  usage
fi

while test $# -gt 0 ; do
  case "$1" in
    -*=*)
      optarg=`echo "$1" | sed 's/[-_a-zA-Z0-9]*=//'`
      ;;
    *)
      optarg=
      ;;
  esac

  case "$1" in
    --datasets)
      echo "${datasets}"
      ;;
    --check-datasets)
      dsok="good"
      for d in ${datasetpaths}; do
        if [ ! -d "${d}" ] ; then
          echo "Failed to locate dataset $(basename $d) at $d" 1>&2
          dsok="bad"
        fi
      done
      if [ "$dsok" = "bad" ] ; then
        exit 1
      fi
      ;;
    --dataset-environment)
      for d in ${datasetenvironment}; do
        echo $d
      done
      ;;
    *)
      usage
      ;;
  esac
  shift
done

# - Finally...
exit 0

